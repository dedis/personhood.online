<Page xmlns="http://schemas.nativescript.org/tns.xsd"
      navigatingTo="navigatingTo"
      class="page">
    <ActionBar class="action-bar">
        <Label class="action-bar-title" text="Manage Badges and Parties"></Label>
        <ActionItem tap="addParty" visibility="{{ canAddParty ? 'visible' : 'collapse' }}"
                    ios.systemIcon="4" ios.position="right"
                    icon="res://ic_add_white" android.position="actionBar"/>
    </ActionBar>
    <GridLayout rows="*, auto" row="1" tap="cancelNetwork">
        <ListView items="{{ elements }}" class="list-group" row="0">
            <ListView.itemTemplate>
                <StackLayout tap="{{ onTap }}" class="{{ 'basic-list-decorated ' + bgcolor }}">
                    <StackLayout orientation="horizontal">
                        <Image src="{{ qrcode }}"
                               visibility="{{ qrcode ? 'visible' : 'collapse' }}"
                               width="30%"/>
                        <Image src="{{ icon }}"
                               visibility="{{ icon ? 'visible' : 'collapse' }}"
                               width="10%"/>
                        <StackLayout style="margin-left:5%;">
                            <Label text="{{ party.name }}" class="h2" textTransform="uppercase"/>
                            <StackLayout visibility="{{ showDetails ? 'visible' : 'collapse' }}">
                                <Label text="{{ party.desc }}" class="h3"/>
                                <Label text="{{ party.date }}" class="h3"/>
                                <Label text="{{ party.location }}" class="h3"/>
                            </StackLayout>
                        </StackLayout>
                    </StackLayout>
                    <GridLayout visibility="{{ nextStep ? 'visible' : 'collapse' }}">
                        <Label text="{{ nextStep }}" class="h3" row="0" style="text-align: center;" width="100%"/>
                        <Label width="{{ stepWidth }}"
                               style="horizontal-align:left; opacity:0.5; background-color: #00caab;"
                               id="{{ 'progress_bar_' + party.name }}" row="0"/>
                        <Label width="100%"
                               style="border-color: black; border-width: 2px;"/>
                    </GridLayout>
                </StackLayout>
            </ListView.itemTemplate>
        </ListView>

        <StackLayout row="0" backgroundColor="gray"
                     style="opacity:0.0;"/>
        <!--style="{{ networkStatus ? 'opacity:0.5;' : 'opacity:0;' }}"/>-->
        <GridLayout rows="auto"
                    row="1"
                    visibility="{{ networkStatus ? 'visible' : 'collapse'}}">
            <Label row="0" text="{{ networkStatus }}" class="label-title"
                   id="progress_text"/>
            <Label row="0" width="100%" style="horizontal-align:left; opacity:0.5;"
                   id="progress_bar" tap="setProgress"/>
        </GridLayout>
    </GridLayout>
</Page>
